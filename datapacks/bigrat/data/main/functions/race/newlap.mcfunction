# Description: player finished a lap
# Author: Cosmelon
# Type: single, objective
# @s = player who just did a lap
# run from main:race/tick
# known bugs:
    # the overall timer can bug out and show an extra or too few digits when a player finishes the course

# position counter
execute as @s[scores={rc_lap=1}] run scoreboard players add .posCounter1 rc_pos 1
execute as @s[scores={rc_lap=1}] run scoreboard players operation @s rc_pos = .posCounter1 rc_pos

execute as @s[scores={rc_lap=2}] run scoreboard players add .posCounter2 rc_pos 1
execute as @s[scores={rc_lap=2}] run scoreboard players operation @s rc_pos = .posCounter2 rc_pos

execute as @s[scores={rc_lap=3}] run scoreboard players add .posCounter3 rc_pos 1
execute as @s[scores={rc_lap=3}] run scoreboard players operation @s rc_pos = .posCounter3 rc_pos

# This looks fucking horrible but it works and I hate it
execute as @s[scores={rc_pos=1,rc_ms=..9,rc_sec=..9}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#e8ce5e"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#e8ce5e"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=1,rc_ms=10..,rc_sec=..9}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#e8ce5e"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#e8ce5e"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=1,rc_ms=..9,rc_sec=10..}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#e8ce5e"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#e8ce5e"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=1,rc_ms=10..,rc_sec=10..}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#e8ce5e"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#e8ce5e"},{"text":")","color":"gold"}]

execute as @s[scores={rc_pos=2,rc_ms=..9,rc_sec=..9}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#cccccc"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#cccccc"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=2,rc_ms=10..,rc_sec=..9}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#cccccc"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#cccccc"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=2,rc_ms=..9,rc_sec=10..}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#cccccc"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#cccccc"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=2,rc_ms=10..,rc_sec=10..}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#cccccc"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#cccccc"},{"text":")","color":"gold"}]

execute as @s[scores={rc_pos=3,rc_ms=..9,rc_sec=..9}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#a05d37"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#a05d37"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=3,rc_ms=10..,rc_sec=..9}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#a05d37"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#a05d37"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=3,rc_ms=..9,rc_sec=10..}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#a05d37"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#a05d37"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=3,rc_ms=10..,rc_sec=10..}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#a05d37"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#a05d37"},{"text":")","color":"gold"}]

execute as @s[scores={rc_pos=4..,rc_ms=..9,rc_sec=..9}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#FFFFFF"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#FFFFFF"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=4..,rc_ms=10..,rc_sec=..9}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#FFFFFF"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#FFFFFF"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=4..,rc_ms=..9,rc_sec=10..}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#FFFFFF"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#FFFFFF"},{"text":")","color":"gold"}]
execute as @s[scores={rc_pos=4..,rc_ms=10..,rc_sec=10..}] run tellraw @a [{"selector":"@s"},{"text":" finished lap ","color":"gold"},{"score":{"name":"@s","objective":"rc_lap"},"color":"green"},{"text":"/3 in ","color":"gold"},{"score":{"name":"@s","objective":"rc_min"},"color":"green"},{"text":":","color":"green"},{"score":{"name":"@s","objective":"rc_sec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":"@s","objective":"rc_ms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#FFFFFF"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#FFFFFF"},{"text":")","color":"gold"}]
# end horrific solution

# nope here it is again
# overall time tellraw
execute as @s[scores={rc_lap=3,rc_pos=1}] if score .raceTime rc_sec matches ..9 if score .raceTime rc_ms matches ..9 run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#e8ce5e"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#e8ce5e"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=1}] if score .raceTime rc_sec matches ..9 if score .raceTime rc_ms matches 10.. run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#e8ce5e"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#e8ce5e"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=1}] if score .raceTime rc_sec matches 10.. if score .raceTime rc_ms matches ..9 run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#e8ce5e"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#e8ce5e"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=1}] if score .raceTime rc_sec matches 10.. if score .raceTime rc_ms matches 10.. run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#e8ce5e"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#e8ce5e"},{"text":")","color":"gold"}]

execute as @s[scores={rc_lap=3,rc_pos=2}] if score .raceTime rc_ms matches ..9 if score .raceTime rc_sec matches ..9 run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#cccccc"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#cccccc"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=2}] if score .raceTime rc_ms matches 10.. if score .raceTime rc_sec matches ..9 run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#cccccc"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#cccccc"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=2}] if score .raceTime rc_ms matches ..9 if score .raceTime rc_sec matches 10.. run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#cccccc"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#cccccc"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=2}] if score .raceTime rc_ms matches 10.. if score .raceTime rc_sec matches 10.. run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#cccccc"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#cccccc"},{"text":")","color":"gold"}]

execute as @s[scores={rc_lap=3,rc_pos=3}] if score .raceTime rc_ms matches ..9 if score .raceTime rc_sec matches ..9 run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#a05d37"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#a05d37"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=3}] if score .raceTime rc_ms matches 10.. if score .raceTime rc_sec matches ..9 run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#a05d37"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#a05d37"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=3}] if score .raceTime rc_ms matches ..9 if score .raceTime rc_sec matches 10.. run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#a05d37"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#a05d37"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=3}] if score .raceTime rc_ms matches 10.. if score .raceTime rc_sec matches 10.. run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#a05d37"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#a05d37"},{"text":")","color":"gold"}]

execute as @s[scores={rc_lap=3,rc_pos=4..}] if score .raceTime rc_ms matches ..9 if score .raceTime rc_sec matches ..9 run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#FFFFFF"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#FFFFFF"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=4..}] if score .raceTime rc_ms matches 10.. if score .raceTime rc_sec matches ..9 run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#FFFFFF"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#FFFFFF"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=4..}] if score .raceTime rc_ms matches ..9 if score .raceTime rc_sec matches 10.. run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".0","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#FFFFFF"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#FFFFFF"},{"text":")","color":"gold"}]
execute as @s[scores={rc_lap=3,rc_pos=4..}] if score .raceTime rc_ms matches 10.. if score .raceTime rc_sec matches 10.. run tellraw @a [{"selector":"@s"},{"text":" completed the course in ","color":"gold"},{"score":{"name":".raceTime","objective":"rc_allmin"},"color":"green"},{"text":":","color":"green"},{"score":{"name":".raceTime","objective":"rc_allsec"},"color":"green"},{"text":".","color":"green"},{"score":{"name":".raceTime","objective":"rc_allms"},"color":"green"},{"text":" (","color":"gold"},{"text":"#","color":"#FFFFFF"},{"score":{"name":"@s","objective":"rc_pos"},"color":"#FFFFFF"},{"text":")","color":"gold"}]

execute as @s[scores={rc_lap=3}] run title @s title {"text":"Finished!","color":"gold"}

# fireworks
execute as @s[scores={rc_pos=1},team=Red] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;16471124],FadeColors:[I;13071990]},{Colors:[I;15257182]}]}}}}
execute as @s[scores={rc_pos=1},team=Blue] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;5526779],FadeColors:[I;8092615]},{Colors:[I;15257182]}]}}}}
execute as @s[scores={rc_pos=1},team=Green] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;5569364],FadeColors:[I;7320687]},{Colors:[I;15257182]}]}}}}
execute as @s[scores={rc_pos=1},team=Yellow] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;16513876],FadeColors:[I;13092723]},{Colors:[I;15257182]}]}}}}

execute as @s[scores={rc_pos=2},team=Red] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;16471124],FadeColors:[I;13071990]},{Colors:[I;14336192]}]}}}}
execute as @s[scores={rc_pos=2},team=Blue] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;5526779],FadeColors:[I;8092615]},{Colors:[I;14336192]}]}}}}
execute as @s[scores={rc_pos=2},team=Green] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;5569364],FadeColors:[I;7320687]},{Colors:[I;14336192]}]}}}}
execute as @s[scores={rc_pos=2},team=Yellow] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;16513876],FadeColors:[I;13092723]},{Colors:[I;14336192]}]}}}}

execute as @s[scores={rc_pos=3},team=Red] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;16471124],FadeColors:[I;13071990]},{Colors:[I;10509623]}]}}}}
execute as @s[scores={rc_pos=3},team=Blue] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;5526779],FadeColors:[I;8092615]},{Colors:[I;10509623]}]}}}}
execute as @s[scores={rc_pos=3},team=Green] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;5569364],FadeColors:[I;7320687]},{Colors:[I;10509623]}]}}}}
execute as @s[scores={rc_pos=3},team=Yellow] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;16513876],FadeColors:[I;13092723]},{Colors:[I;10509623]}]}}}}

execute as @s[scores={rc_pos=4..},team=Red] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;16471124],FadeColors:[I;13071990]},{Colors:[I;16777215]}]}}}}
execute as @s[scores={rc_pos=4..},team=Blue] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;5526779],FadeColors:[I;8092615]},{Colors:[I;16777215]}]}}}}
execute as @s[scores={rc_pos=4..},team=Green] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;5569364],FadeColors:[I;7320687]},{Colors:[I;16777215]}]}}}}
execute as @s[scores={rc_pos=4..},team=Yellow] at @s run summon firework_rocket ~ ~1 ~ {LifeTime:0,FireworksItem:{id:"firework_rocket",Count:1,tag:{Fireworks:{Flight:0,Explosions:[{Colors:[I;16513876],FadeColors:[I;13092723]},{Colors:[I;16777215]}]}}}}

# scoring
execute as @s[scores={rc_lap=3}] run tellraw @s [{"text":"+","color":"green"},{"score":{"name":".indivFinish","objective":"rc_scores"},"color":"green"},{"text":" points (Finishing)","color":"green"}]
execute as @s[scores={rc_lap=3}] run scoreboard players operation .indivFinish rc_main += @s indivScore
execute as @s[scores={rc_lap=3}] run scoreboard players remove .indivFinish rc_main 2

# custom sound
playsound minecraft:custom.race/lap voice @s ~ ~ ~ 100000 1.2

# save lap times on each lap
execute as @s[scores={rc_lap=1}] run scoreboard players operation @s rc_ms1 = @s rc_ms
execute as @s[scores={rc_lap=1}] run scoreboard players operation @s rc_s1 = @s rc_sec
execute as @s[scores={rc_lap=1}] run scoreboard players operation @s rc_min1 = @s rc_min
execute as @s[scores={rc_lap=2}] run scoreboard players operation @s rc_ms2 = @s rc_ms
execute as @s[scores={rc_lap=2}] run scoreboard players operation @s rc_s2 = @s rc_sec
execute as @s[scores={rc_lap=2}] run scoreboard players operation @s rc_min2 = @s rc_min
execute as @s[scores={rc_lap=3}] run scoreboard players operation @s rc_ms3 = @s rc_ms
execute as @s[scores={rc_lap=3}] run scoreboard players operation @s rc_s3 = @s rc_sec
execute as @s[scores={rc_lap=3}] run scoreboard players operation @s rc_min3 = @s rc_min

# resetting timer scores
scoreboard players set @s rc_ms 0
scoreboard players set @s rc_sec 0
scoreboard players set @s rc_min 0
scoreboard players set @s rc_checkpt 0
scoreboard players add @s rc_lap 1
execute unless score @s rc_lap matches 3.. run scoreboard players set @s rc_pos 0